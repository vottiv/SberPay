#Подключение к платежной системе Сбербанка для Битрикса

##Вводные

Реализация под Битрикс была сделана на основе информации из этой статьи https://snipp.ru/php/sberbank-pay.

Функционал потребовался для создании ссылки для оплаты в мобильном приложении. Мобильное приложение обращается к сайту на платформе Битрикса.

##К делу

1) Получи ссылку на оплату заказа, для этого вызови
```php
use PaySystem\SberPay;
$pay = new SberPay();
$result = $pay->registerOrder($orderId);
```
2) Теперь вставь эту ссылку на кнопку оплаты
3) Перейди по ссылки, оплати, произойдет редирект обратно на сайт
4) На странице, куда кинуло после оплаты, нужно добавить проверку статуса
```php
PaySystem\SberPay::getOrderStatus($orderId);
```
##Важно 
при регистрации заказа используется идентификатор заказа на сайте, а при проверке необходим идентификатор заказа из системы Сбера

##Документация Сбера
https://developer.sberbank.ru/doc/v1/acquiring/rest-requests1pay